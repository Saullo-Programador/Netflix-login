{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LARA\\\\Desktop\\\\ReactTS\\\\Sistema_Login\\\\Client\\\\src\\\\App\\\\Shared\\\\Contexts\\\\Auth\\\\AuthProvider.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport { useApi } from \"../../Hooks/useApi\";\nimport { AuthContext } from \"./AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [user, setUser] = useState(null);\n  const api = useApi();\n  useEffect(() => {\n    const validateToken = async () => {\n      const storageData = localStorage.getItem('authToken');\n      if (storageData) {\n        const data = await api.validateToken(storageData);\n        if (data.user) {\n          setUser(data.user);\n        }\n      }\n    };\n    validateToken();\n  }, [api]);\n  const signin = async (email, password) => {\n    const data = await api.signin(email, password);\n    if (data.user && data.token) {\n      setUser(data.user);\n      setToken(data.token);\n      return true;\n    }\n    return false;\n  };\n  const signout = async () => {\n    console.log(\"signout está sendo executada.\");\n    setUser(null);\n    setToken('');\n    await api.logout();\n  };\n  const setToken = token => {\n    localStorage.setItem('authToken', token);\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      signin,\n      signout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n};\n_s(AuthProvider, \"/S2GVsTmHFLNzZ6vepIVAoo+nTk=\", false, function () {\n  return [useApi];\n});\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["useEffect","useState","useApi","AuthContext","jsxDEV","_jsxDEV","AuthProvider","children","_s","user","setUser","api","validateToken","storageData","localStorage","getItem","data","signin","email","password","token","setToken","signout","console","log","logout","setItem","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/LARA/Desktop/ReactTS/Sistema_Login/Client/src/App/Shared/Contexts/Auth/AuthProvider.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport { useApi } from \"../../Hooks/useApi\";\r\nimport { User } from \"../../Types/User\";\r\nimport { AuthContext } from \"./AuthContext\";\r\n\r\nexport const AuthProvider = ({ children }: { children: JSX.Element }) => {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const api = useApi();\r\n\r\n    useEffect(() => {\r\n        const validateToken = async () => {\r\n            const storageData = localStorage.getItem('authToken');\r\n            if (storageData) {\r\n                const data = await api.validateToken(storageData);\r\n                if (data.user) {\r\n                    setUser(data.user);\r\n                }\r\n            }\r\n        }\r\n        validateToken();\r\n    }, [api]);\r\n\r\n    const signin = async (email: string, password: string) => {\r\n        const data = await api.signin(email, password);\r\n        if (data.user && data.token) {\r\n            setUser(data.user);\r\n            setToken(data.token);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    const signout = async () => {\r\n        console.log(\"signout está sendo executada.\");\r\n        setUser(null);\r\n        setToken('');\r\n        await api.logout();\r\n    }\r\n\r\n    const setToken = (token: string) => {\r\n        localStorage.setItem('authToken', token);\r\n    }\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ user, signin, signout }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n}"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,MAAM,QAAQ,oBAAoB;AAE3C,SAASC,WAAW,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE5C,OAAO,MAAMC,YAAY,GAAGA,CAAC;EAAEC;AAAoC,CAAC,KAAK;EAAAC,EAAA;EACrE,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAAc,IAAI,CAAC;EACnD,MAAMU,GAAG,GAAGT,MAAM,CAAC,CAAC;EAEpBF,SAAS,CAAC,MAAM;IACZ,MAAMY,aAAa,GAAG,MAAAA,CAAA,KAAY;MAC9B,MAAMC,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,WAAW,CAAC;MACrD,IAAIF,WAAW,EAAE;QACb,MAAMG,IAAI,GAAG,MAAML,GAAG,CAACC,aAAa,CAACC,WAAW,CAAC;QACjD,IAAIG,IAAI,CAACP,IAAI,EAAE;UACXC,OAAO,CAACM,IAAI,CAACP,IAAI,CAAC;QACtB;MACJ;IACJ,CAAC;IACDG,aAAa,CAAC,CAAC;EACnB,CAAC,EAAE,CAACD,GAAG,CAAC,CAAC;EAET,MAAMM,MAAM,GAAG,MAAAA,CAAOC,KAAa,EAAEC,QAAgB,KAAK;IACtD,MAAMH,IAAI,GAAG,MAAML,GAAG,CAACM,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC;IAC9C,IAAIH,IAAI,CAACP,IAAI,IAAIO,IAAI,CAACI,KAAK,EAAE;MACzBV,OAAO,CAACM,IAAI,CAACP,IAAI,CAAC;MAClBY,QAAQ,CAACL,IAAI,CAACI,KAAK,CAAC;MACpB,OAAO,IAAI;IACf;IACA,OAAO,KAAK;EAChB,CAAC;EAED,MAAME,OAAO,GAAG,MAAAA,CAAA,KAAY;IACxBC,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;IAC5Cd,OAAO,CAAC,IAAI,CAAC;IACbW,QAAQ,CAAC,EAAE,CAAC;IACZ,MAAMV,GAAG,CAACc,MAAM,CAAC,CAAC;EACtB,CAAC;EAED,MAAMJ,QAAQ,GAAID,KAAa,IAAK;IAChCN,YAAY,CAACY,OAAO,CAAC,WAAW,EAAEN,KAAK,CAAC;EAC5C,CAAC;EAED,oBACIf,OAAA,CAACF,WAAW,CAACwB,QAAQ;IAACC,KAAK,EAAE;MAAEnB,IAAI;MAAEQ,MAAM;MAAEK;IAAQ,CAAE;IAAAf,QAAA,EAClDA;EAAQ;IAAAsB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACS,CAAC;AAE/B,CAAC;AAAAxB,EAAA,CA3CYF,YAAY;EAAA,QAETJ,MAAM;AAAA;AAAA+B,EAAA,GAFT3B,YAAY;AAAA,IAAA2B,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}